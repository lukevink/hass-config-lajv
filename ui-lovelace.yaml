button_card_templates: !include button_card_templates.yaml

custom_header:
  compact_mode: true
  editor_warnings: false
  exceptions:
    - conditions:
        user_agent: Lenovo
      config:
        disable_sidebar: true
        hide_header: true
        kiosk_mode: true
    - conditions:
        user: tablet
      config:
        disable_sidebar: true
        kiosk_mode: true
    - conditions:
        device_id: e98effc3-b940ce40
      config:
        disable_sidebar: true
        kiosk_mode: true




title: Lust & Freud
views:

    #############################################################################################################################################
    #                                                                                                                                           #
    #                                                              Floorplan View                                                               #
    #                                                                                                                                           #
    #############################################################################################################################################

  - title: Control Rooms
    icon: 'mdi:floor-plan'
    panel: true
    badges: []
    cards:

        ###################   config-template-card    #####################
        #########################   IMPORTANT!    #########################

        # To use the styling templates for individual lights, I have used
        # Config Template Card. Config template card passes the entities it
        # uses into the card. Make sure you change these entities below to
        # your own and include any light entities you use above.

        # To understand why, check: https://github.com/iantrich/config-template-card

      - type: 'custom:config-template-card'
        entities:
          - light.roof_garden
          - light.roof_plants
          - light.kitchen_1
          - light.kitchen_2
          - light.kitchen_3
          - light.kitchen_4
          - light.couch
          - light.table
          - light.cabinet
          - light.toilet_1
          - light.toilet_2
          - light.study
          - light.bedroom_roof
          - light.bed
          - light.stairs
          - light.door
          - light.balcony
          - light.kitchen_sink_lights
          - light.kitchen_fridge_lights
          - light.kitchen_lights
          - light.toilet_lights
        card:
          ###################   Picture Elements Card    #####################
          type: picture-elements
          image: /local/ui/floorplan/floorplan_night.png
          style: |
            ha-card:first-child {
              background: rgba(42, 46, 48, 1)
            }
          elements:




              #########################    DAY BASE FLOORPLAN OVERLAY    #########################

            - action: none
              entity: sun.sun
              hold_action:
                action: none
              state_image:
                above_horizon: /local/ui/floorplan/floorplan_day.png
                below_horizon: /local/transparent.png
              style:
                height: 100%
                left: 50%
                mix-blend-mode: lighten
                opacity: '${ states[''sensor.sunlight_opacity''].state }'
                top: 50%
                width: 100%
              tap_action:
                action: none
              type: image


              #########################    WEATHER ANIMATIONS    #########################

            - action: none
              entity: weather.buienweather
              hold_action:
                action: none
              image: /local/ui/floorplan/weather/rainstorm.gif
              state_filter:
                'pouring': opacity(100%)
              style:
                left: 60%
                mix-blend-mode: color-dodge
                top: 50%
                width: 110%
                opacity: 0
              tap_action:
                action: none
              type: image


              #########################    Inside overlays for weather    #########################


            - action: none
              hold_action:
                action: none
              image: /local/ui/floorplan/main_night.png
              style:
                height: 100%
                left: 50%
                top: 50%
                width: 100%
              tap_action:
                action: none
              type: image

            - action: none
              entity: sun.sun
              hold_action:
                action: none
              state_image:
                above_horizon: /local/ui/floorplan/main_day.png
                below_horizon: /local/transparent.png
              style:
                height: 100%
                left: 50%
                mix-blend-mode: lighten
                opacity: '${ states[''sensor.sunlight_opacity''].state }'
                top: 50%
                width: 100%
              tap_action:
                action: none
              type: image

              #########################    INDIVIDUAL LIGHTS - BLENDED IMAGE OVERLAYS    #########################

            - action: none
              entity: light.table
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/table.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.table'].attributes.hs_color
                  ? states['light.table'].attributes.hs_color[0] : 0) + "deg)"}
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.table'].state === 'on' ? (states['light.table'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.cabinet
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/cabinet.png
              style:
                filter: >-
                  ${ "hue-rotate(" +
                  (states['light.cabinet'].attributes.hs_color  ?
                  states['light.cabinet'].attributes.hs_color[0] : 0) +
                  "deg)"}
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.cabinet'].state === 'on' ? (states['light.cabinet'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.couch
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/couch.png
              state_filter:
                'off': opacity(0%)
                'on': opacity(100%)
              style:
                left: 73.73%
                mix-blend-mode: lighten
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.roof_plants
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/roofplants.png
              style:
                filter: >-
                  ${ "hue-rotate(" +
                  (states['light.roof_plants'].attributes.hs_color  ?
                  states['light.roof_plants'].attributes.hs_color[0] : 0) +
                  "deg)"}
                left: 27.02%
                mix-blend-mode: lighten
                opacity: "${states['light.roof_plants'].state === 'on' ? (states['light.roof_plants'].attributes.brightness / 255) : '0'}"
                top: 51.1%
                width: 45.0390625%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.roof_garden
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/roofgarden.png
              style:
                filter: >-
                  ${ "hue-rotate(" +
                  (states['light.roof_garden'].attributes.hs_color  ?
                  states['light.roof_garden'].attributes.hs_color[0] : 0) +
                  "deg)"}
                left: 27.02%
                mix-blend-mode: lighten
                opacity: "${states['light.roof_garden'].state === 'on' ? (states['light.roof_garden'].attributes.brightness / 255) : '0'}"
                top: 51.1%
                width: 45.0390625%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.kitchen_1
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/kitchen1.png
              style:
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.kitchen_1'].state === 'on' ? (states['light.kitchen_1'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.kitchen_2
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/kitchen2.png
              style:
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.kitchen_2'].state === 'on' ? (states['light.kitchen_2'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.kitchen_3
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/kitchen3.png
              style:
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.kitchen_3'].state === 'on' ? (states['light.kitchen_3'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.kitchen_4
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/kitchen4.png
              style:
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.kitchen_4'].state === 'on' ? (states['light.kitchen_4'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.door
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/door.png
              style:
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.door'].state === 'on' ? (states['light.door'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.stairs
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/stairs.png
              style:
                left: 73.73%
                mix-blend-mode: lighten
                opacity: "${states['light.stairs'].state === 'on' ? (states['light.stairs'].attributes.brightness / 255) : '0'}"
                top: 32.65%
                width: 39.296875%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.toilet_lights
              image: /local/ui/floorplan/lights/toilet.png
              state_filter:
                'off': opacity(0%)
                'on': opacity(100%)
                unknown: opacity(0%)
              style:
                left: 73.73%
                top: 32.65%
                width: 39.296875%
                mix-blend-mode: lighten
              tap_action:
                action: none
              type: image
            # - action: none
            #   entity: binary_sensor.bathroom
            #   image: /local/ui/floorplan/lights/bathroom.png
            #   state_filter:
            #     'off': opacity(0%)
            #     'on': opacity(0%)
            #     unknown: opacity(0%)
            #   style:
            #     left: 76.85%
            #     top: 78.2%
            #     width: 46.1328125%
            #     mix-blend-mode: lighten
            #   tap_action:
            #     action: none
            #   type: image
            - action: none
              entity: light.bed
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/bed.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.bed'].attributes.hs_color  ?
                  states['light.bed'].attributes.hs_color[0] : 0) + "deg)"}
                left: 76.85%
                mix-blend-mode: lighten
                opacity: "${states['light.bed'].state === 'on' ? (states['light.bed'].attributes.brightness / 255) : '0'}"
                top: 78.2%
                width: 46.1328125%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.bedroom_roof
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/bedroof.png
              style:
                filter: >-
                  ${ "hue-rotate(" +
                  (states['light.bedroom_roof'].attributes.hs_color  ?
                  states['light.bedroom_roof'].attributes.hs_color[0] : 0) +
                  "deg)"}
                left: 76.85%
                mix-blend-mode: lighten
                opacity: "${states['light.bedroom_roof'].state === 'on' ? (states['light.bedroom_roof'].attributes.brightness / 255) : '0'}"
                top: 78.2%
                width: 46.1328125%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.study
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/study.png
              style:
                filter: >-
                  ${ "hue-rotate(" + (states['light.study'].attributes.hs_color
                  ? states['light.study'].attributes.hs_color[0] : 0) + "deg)"}
                left: 76.85%
                mix-blend-mode: lighten
                opacity: "${states['light.study'].state === 'on' ? (states['light.study'].attributes.brightness / 255) : '0'}"
                top: 78.2%
                width: 46.1328125%
              tap_action:
                action: none
              type: image
            - action: none
              entity: light.balcony
              hold_action:
                action: none
              image: /local/ui/floorplan/lights/balcony.png
              style:
                filter: >-
                  ${ "hue-rotate(" +
                  (states['light.balcony'].attributes.hs_color  ?
                  states['light.balcony'].attributes.hs_color[0] : 0) + "deg)"}
                left: 76.85%
                mix-blend-mode: lighten
                opacity: "${states['light.balcony'].state === 'on' ? (states['light.balcony'].attributes.brightness / 255) : '0'}"
                top: 78.2%
                width: 46.1328125%
              tap_action:
                action: none
              type: image








              #########################    ROOM/GROUP CONTROL TRANSPARENT IMAGES    #########################

              #  Used to create tap areas and popups for each room, referring to light groups.
              #  Because the above images overlap each other, I used seperate transparent images
              #. to handle the control of the room, so you always tap the right room.
              #
              #  browser_mod.popup is used for a tap and hold for a custom popup card

            - entity: light.living_room_lights
              hold_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.living_room_lights
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards:
                              - brightness: false
                                color_picker: false
                                effects_list: false
                                entity: light.living_room_lights
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                              - brightness: false
                                color_temp: false
                                entity: light.living_room_lights
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.living_room_lights
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 2
                        layout: horizontal
                        max_width:
                          - 60%
                          - 40%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Living Room
              image: /local/transparent.png
              style:
                height: 48%
                left: 76.8%
                top: 32.65%
                width: 32%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.living_room_lights
              type: image
            - entity: light.stairs_lights
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.stairs_lights
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards: null
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.stairs_lights
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 1
                        layout: horizontal
                        max_width:
                          - 100%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Stairs Lights
              image: /local/transparent.png
              style:
                height: 28%
                left: 61%
                top: 23%
                width: 12.7%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.stairs_lights
              type: image
            - entity: group.kitchen
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.kitchen_lights
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards: null
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.kitchen_lights
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 1
                        layout: horizontal
                        max_width:
                          - 100%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Kitchen Lights
              image: /local/transparent.png
              style:
                height: 29%
                left: 73%
                top: 24.5%
                width: 12%
              tap_action:
                action: toggle
              type: image
            - entity: light.toilet_lights
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.toilet_lights
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards: null
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.toilet_lights
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 1
                        layout: horizontal
                        max_width:
                          - 100%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Toilet Lights
              image: /local/transparent.png
              style:
                height: 13.5%
                left: 57.5%
                top: 50%
                width: 6%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.toilet_lights
              type: image






            - entity: light.study
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.study
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards:
                              - brightness: false
                                color_picker: false
                                effects_list: false
                                entity: light.study
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                              - brightness: false
                                color_temp: false
                                entity: light.study
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.study
                                header: false
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 2
                        layout: horizontal
                        max_width:
                          - 60%
                          - 40%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Study Lights
              image: /local/transparent.png
              style:
                height: 27%
                left: 72.5%
                top: 70.8%
                width: 12.5%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.study
              type: image


            - entity: light.bedroom_lights
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.bedroom_lights
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards:
                              - brightness: false
                                color_picker: false
                                effects_list: false
                                entity: light.bedroom_lights
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                              - brightness: false
                                color_temp: false
                                entity: light.bedroom_lights
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.bedroom_lights
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 2
                        layout: horizontal
                        max_width:
                          - 60%
                          - 40%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Bedroom Lights
              image: /local/transparent.png
              style:
                height: 27%
                left: 86%
                top: 70.8%
                width: 13%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.bedroom_lights
              type: image
            - entity: light.balcony
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.balcony
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards:
                              - brightness: false
                                color_picker: false
                                effects_list: false
                                entity: light.balcony
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                              - brightness: false
                                color_temp: false
                                entity: light.balcony
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.balcony
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 2
                        layout: horizontal
                        max_width:
                          - 60%
                          - 40%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Balcony Lights
              image: /local/transparent.png
              style:
                height: 17%
                left: 74%
                top: 94%
                width: 38%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.balcony
              type: image
            - entity: light.roof_lights
              double_tap_action:
                action: fire-dom-event
                browser_mod:
                  command: popup
                  card:
                    cards:
                      - entities:
                          - entity: light.roof_lights
                            secondary_info: last-changed
                        style:
                          z-index: 5
                        type: entities
                      - cards:
                          - cards:
                              - brightness: false
                                color_picker: false
                                effects_list: false
                                entity: light.roof_lights
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                              - brightness: false
                                color_temp: false
                                entity: light.roof_lights
                                full_width_sliders: true
                                hide_header: true
                                persist_features: true
                                show_slider_percent: false
                                smooth_color_wheel: true
                                type: 'custom:light-entity-card'
                                style: |
                                    ha-card {
                                      box-shadow: none !important;
                                    }
                            column_height: 1
                            layout: vertical
                            type: 'custom:layout-card'
                          - entities:
                              - color_temp: true
                                entity: light.roof_lights
                                hide_header: true
                                persist_features: true
                                type: 'custom:light-slider-card'
                            show_header_toggle: false
                            style: |
                                :host{
                                  height: 100%;
                                  z-index: 0;
                                }
                                ha-card {
                                  box-shadow: none !important;
                                }
                            type: entities
                        column_num: 2
                        layout: horizontal
                        max_width:
                          - 60%
                          - 40%
                        type: 'custom:layout-card'
                    type: 'custom:vertical-stack-in-card'
                  deviceID:
                    - this
                  style:
                    '--ha-card-border-radius': 0vw 0vw 0.8vw 0.8vw
                    border-radius: 0.8vw
                    opacity: 0.9
                  title: Roof Lights
              image: /local/transparent.png
              style:
                height: 80%
                left: 32%
                top: 49%
                width: 30%
              tap_action:
                action: call-service
                service: homeassistant.toggle
                service_data:
                    entity_id: light.roof_lights
              type: image

              #########################    INDIVIDUAL LIGHT ICONS    #########################

              #  These are the white state icons that appear over the floorplan.
              #  They are the same as above, but instead of "areas" to control a group, they only
              #. control individual lights
              #
              #  browser_mod.popup is used for a tap and hold for a custom popup card, custom styling
              #  of the icon to make it appear white, etc.


            - entity: light.cabinet
              type: custom:button-card
              style:
                left: 72.5%
                top: 54.5%
              template:
                - light

            - entity: light.kitchen_fridge_lights
              type: custom:button-card
              style:
                left: 73%
                top: 31%
              template:
                - light_group

            - entity: light.kitchen_sink_lights
              type: custom:button-card
              style:
                left: 74%
                top: 17%
              template:
                - light_group


            - entity: light.door
              type: custom:button-card
              style:
                left: 58.5%
                top: 17%
              template:
                - light

            - entity: light.stairs
              type: custom:button-card
              styles:
                  card:
                    - transform: 'scaleX(-1) scaleY(1)'
              style:
                left: 65%
                top: 17%
              template:
                - light

            - entity: light.toilet_lights
              type: custom:button-card
              style:
                left: 57.3%
                top: 50%
              template:
                - light_group

            - entity: light.reading_lamp
              type: custom:button-card
              style:
                left: 90%
                top: 37%
              template:
                - light_white

            - entity: light.couch
              type: custom:button-card
              style:
                left: 90%
                top: 53%
              template:
                - light_white


            - entity: light.bed
              type: custom:button-card
              style:
                left: 90%
                top: 79%
              template:
                - light

            - entity: light.bedroom_roof
              type: custom:button-card
              style:
                left: 85.5%
                top: 70.5%
              template:
                - light

            - type: custom:button-card
              entity: light.study
              style:
                left: 72.5%
                top: 70.5%
              template:
                - light

            - type: custom:button-card
              entity: light.balcony
              style:
                left: 79.2%
                top: 88.5%
              template:
                - light

            - entity: light.roof_plants
              type: custom:button-card
              style:
                left: 40%
                top: 50%
              template:
                - light

            - entity: light.roof_garden
              type: custom:button-card
              style:
                left: 30%
                top: 50%
              template:
                - light

            - entity: light.table
              type: custom:button-card
              style:
                left: 84.3%
                top: 25.7%
              template:
                - light




              #########################    EXPERIMENTAL NOW PLAYING ON PROJECTOR IN FLOORPLAN    #########################

              # custom card to show whats playing on the screen when its playing (plex)

            # - entity: media_player.plex_projector
            #   style:
            #     left: 68.5%
            #     perspective-origin: '70%, 50%'
            #     top: 37.5%
            #     transform: >-
            #       perspective(210px) scale(3.7, 1.8)  rotateX(34deg)
            #       rotateY(86deg) rotateZ(-86deg) translateY(-2px)  skewX(20deg)
            #       skewY(-10deg)
            #     width: 10%
            #   type: 'custom:now-playing-poster'

            - action: none
              hold_action:
                action: none
              image: /local/ui/sidebar/sidebarBG2.png
              style:
                height: 100%
                left: 11.73828125%
                top: 50%
                width: 23.4765625%
              tap_action:
                action: none
              type: image

              #################################################################
              #                                                               #
              #                             SIDEBAR                           #
              #                                                               #
              #################################################################

              #########################    BG IMAGE    #########################
            - action: none
              hold_action:
                action: none
              image: /local/ui/sidebar/sidebarBG2.png
              style:
                height: 100%
                left: 11.73828125%
                top: 50%
                width: 23.4765625%
              tap_action:
                action: none
              type: image

              #########################    TIME AND DATE    #########################
            - entity: sensor.time
              hold_action:
                action: none
              style:
                color: 'rgba(255, 255, 255, 0.7)'
                font-size: 5.41vw
                font-weight: 200
                left: 2.7%
                letter-spacing: '-0.05vw'
                max-width: 1px
                top: 10%
              tap_action:
                action: none
              type: state-label
            - entity: sensor.date_string
              hold_action:
                action: none
              style:
                color: 'rgba(255, 255, 255, 0.3)'
                font-size: 1.3vw
                font-weight: 300
                left: 18.1%
                letter-spacing: '-0.05vw'
                text-align: left
                top: 17%
                width: 30%
              tap_action:
                action: none
              type: state-label

              #########################    MENU BUTTONS    #########################

            - action: none
              image: /local/ui/sidebar/rooms_on.png
              style:
                border-radius: 5vw
                box-shadow: '0px 0.2vw 0.8vw 0px rgba(0,0,0,0.1)'
                left: 11.7%
                top: 26%
                width: 20.5078125%
              tap_action:
                action: navigate
                navigation_path: /lovelace/0
              type: image
            - action: none
              image: /local/ui/sidebar/cleanUp_off.png
              style:
                left: 11.7%
                top: 34%
                width: 20.5078125%
              tap_action:
                action: navigate
                navigation_path: /lovelace/1
              type: image
            - action: none
              image: /local/ui/sidebar/media_off.png
              style:
                left: 11.7%
                top: 42%
                width: 20.5078125%
              tap_action:
                action: navigate
                navigation_path: /lovelace/2
              type: image
            - action: none
              image: /local/ui/sidebar/health_off.png
              style:
                left: 11.7%
                top: 50%
                width: 20.5078125%
              tap_action:
                action: navigate
                navigation_path: /lovelace/4
              type: image


              #########################    People at home    #########################

              #Optional label for people at Home (currently hidden with opacity: 0)

            - style:
                color: white
                font-size: 1vw
                font-weight: 300
                left: 8.8%
                opacity: 0
                top: 66%
                width: 10%
              text: 'People at home:'
              type: 'custom:text-element'

            - action: none
              entity: person.luke_vink
              state_image:
                home: /local/people/luke.png
                not_home: /local/people/lukeGone.png
              style:
                background-color: 'rgba(255, 255, 255, 0.0)'
                border-radius: 10vw
                height: 4.5vw
                left: 5.8%
                top: 72%
                width: 4.5vw
              tap_action: none
              type: image

            - action: none
              entity: person.santa_stibe
              state_image:
                home: /local/people/santa.png
                not_home: /local/people/santaGone.png
              style:
                background-color: 'rgba(255, 255, 255, 0.0)'
                border-radius: 10vw
                height: 4.5vw
                left: 10.8%
                top: 72%
                width: 4.5vw
              tap_action: none
              type: image

            - action: none
              image: /local/transparent.png
              style:
                background-color: 'rgba(255, 255, 255, 0.0)'
                border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
                border-radius: 10vw
                height: 4.2vw
                left: 15.9%
                top: 72.2%
                width: 4.2vw
              tap_action: none
              type: image
            - action: none
              image: /local/transparent.png
              style:
                background-color: 'rgba(255, 255, 255, 0.0)'
                border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
                border-radius: 10vw
                height: 4.2vw
                left: 21.1%
                top: 72.2%
                width: 4.2vw
              tap_action: none
              type: image

              #########################    Minigraph to show temperature inside and out    #########################



            - color_thresholds:
                - color: '#4dd2ff'
                  value: 10
                - color: '#ffa31a'
                  value: 15
                - color: '#ff1a1a'
                  value: 20
              entities:
                - sensor.stairs_detector_temperature
                - sensor.buienradar_ground_temperature
              icon: 'mdi:home-thermometer-outline'
              show:
                icon: true
                legend: false
                name: false
              style: |
                :host {
                  left: 11.6%;
                  top:  92.9%;
                  width: 23.5%;
                  overflow: hidden;
                  height: 15%;
                  background: none  !important;
                  box-shadow: none !important;
                }
                .header {
                  font-size: 1vw;
                  position: absolute !important;
                  width: 5% !important;
                  padding: 0 !important;
                  right: 20% !important;
                  top: 15% !important;
                }
                ha-card {
                  background: none  !important;
                  padding: 0 !important;
                }
                .icon > ha-icon {
                  width:1.8vw !important;
                  height:1.8vw !important;
                }
                .state__time{
                  font-size:0.9vw !important;
                  margin-top: 0.2vw;
                  font-weight: 300 !important;
                  opacity: 0.4 !important;
                }
                .states {
                  font-size: 0.5vw !important;
                  padding: 1vw 0vw 0vw 0vw  !important;
                  margin: auto !important;
                  width: 68%;
                }
              tap_action:
                action: navigate
                navigation_path: /lovelace/4
              type: 'custom:mini-graph-card'

              #########################    Mini Weather card    #########################

            - backdrop: false
              entity: weather.buienweather
              name: ' '
              style: |
                :host {
                  left: 11.4%;
                  top:  85.5%;
                  width: 17%;
                  height: 7% !important;
                  overflow: hidden;
                  height: 8.5vw;
                  background: none  !important;
                  box-shadow: none !important;
                  font-size: 1vw !important;
                }
                ha-card {
                  background: none  !important;
                  box-shadow: none !important;
                  flex-flow: row-reverse !important;
                  padding: 0 !important;
                }
                .weather__info--add{
                  display : none !important;
                }
                .weather__info{
                  flex-grow: 1;
                  min-height: 0 !important;
                  height: 2.4vw;
                  margin-left: 0.6vw;
                }
                .weather__icon{
                  margin-right:0.5% !important;
                  margin-top: -3%;
                  width: 2vw !important;
                  height: 2vw !important;
                  flex: 0 0 2vw !important;
                }
              tap_action:
                action: navigate
                navigation_path: /lovelace/3
              type: 'custom:simple-weather-card'

              #########################    Overlay shadow images    #########################

            - action: none
              image: /local/ui/sidebar/sideShadow.png
              style:
                height: 35%
                left: 18.45%
                pointer-events: none
                top: 83%
                width: 10%
              type: image
            - action: none
              image: /local/ui/sidebar/sidebarInnerShadow.png
              style:
                left: 22.83%
                opacity: 0.7
                pointer-events: none
                top: 50%
                width: 1.2109375%
              type: image

              #########################   Styled now playing Media Player    #########################

              # when the media player is playing, this overlaps the "Media" menu button

            - entity: media_player.spotify_luke_vink
              hide:
                controls: true
                name: true
                power: true
                source: true
                volume: true
                progress: true
              idle_view:
                after: 0.1
                when_idle: true
                when_paused: true
                when_standby: true
              style: |
                :host {
                  left: 11.7%;
                  top:  41.5%;
                  width: 20.5078125%;
                  border-radius: 5vw;
                  overflow: hidden;
                  height: 3.8vw;
                  box-shadow: none !important;
                }
                ha-card {
                  border-radius: 5vw;
                  overflow: hidden !important;
                  box-shadow: none !important;
                  padding: 0.1vw 0.9vw 0.7vw 1.05vw !important;
                }
                ha-card.--inactive .mmp-player{
                  opacity: 0 !important;
                }
                #primaryProgress{
                    background: #474A52 !important;
                }
                .entity__info{
                  height: 2.6vw;
                  width: 65% !important;
                  max-height: 20vw !important;
                  font-size: 0.9vw !important;
                  margin:0 0 0 1.04vw !important;
                  display: inline-block !important;
                }
                div.mmp__bg{
                  background: #1E2022;
                }
                ha-card.--inactive div.mmp__bg{
                  background: none;
                }
                div.mmp-player {
                  padding: 0vw;
                  height: 100%;
                }
                ha-card {
                  height: 100%;
                }
                mmp-powerstrip {
                  width: 100%;
                  display: block;
                  padding:0;
                }
                ha-icon{
                  display: block !important;
                  height: 2vw !important;
                  width: 2vw !important;
                  margin: 0.3vw 1.5vw 0 0vw !important;
                }
                .entity__icon{
                  float:right;
                  padding: 0.1vw;
                  width: 3vw !important;
                  height: 3vw !important;
                  min-width: 0 !important;
                  min-height: 0 !important;
                  margin:0 !important;
                  display: inline-block !important;
                }

                .mmp-player__core {
                  height: auto;
                  width: 100% !important;
                  margin-bottom: 0.1vw;
                  display: block !important;
                  position: absolute !important;
                  bottom: 0;
                }

                .entity__info__media{
                  max-height: 20vw !important;
                }
                .entity__info__media span::before{
                  content: none !important
                }
                .attr__media_title{
                  display:block;
                  color: white;
                  font-weight: 300;
                  font-size: 1.2vw !important;
                }
                .attr__media_artist{
                  font-size: 0.8vw !important;
                  font-weight: 200;
                  color: white;
                }
                .entity__artwork{
                  display:inline-block;
                  float: right;
                  margin-right: 0 !important;
                  display: inline-block;
                  float: right;
                  width: 2.2vw !important;
                  height: 2.2vw !important;
                  min-width: 0 !important;
                  margin: 0.2vw 1vw 0 0 !important;
                }
              tap_action:
                action: navigate
                navigation_path: /lovelace/2
              type: 'custom:mini-media-player'




    #############################################################################################################################################
    #                                                                                                                                           #
    #                                                            Xiaomi Clean Up View                                                           #
    #                                                                                                                                           #
    #############################################################################################################################################

  - title: Clean Up
    icon: 'mdi:robot-vacuum'
    panel: true
    cards:
      - type: picture-elements
        image: /local/ui/floorplan/floorplan_night_cu.png
        style: |
          ha-card {
            background: rgba(42, 46, 48, 1)
          }
        elements:
          - action: none
            entity: sun.sun
            hold_action:
              action: none
            state_image:
              above_horizon: /local/ui/floorplan/floorplan_day_cu.png
              below_horizon: /local/transparent.png
            style:
              height: 100%
              left: 50%
              mix-blend-mode: lighten
              opacity: '${ states[''sensor.sunlight_opacity''].state }'
              top: 50%
              width: 100%
            tap_action:
              action: none
            type: image


            #######################################################################
            #                                                                     #
            #              Xiaomi Mi Robot : Zoned Cleanup Buttons                #
            #                            Enabled by:                              #
            #   https://www.home-assistant.io/integrations/vacuum.xiaomi_miio/    #
            #                                                                     #
            #######################################################################

          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              bedroom: /local/transparent.png
              charging: /local/ui/cleanUp/clean_livingroom.png
              goinghome: /local/ui/cleanUp/clean_livingroom.png
              kitchen: /local/transparent.png
              livingroom: /local/ui/cleanUp/clean_livingroomSelected.png
              study: /local/transparent.png
            style:
              left: 73.8%
              top: 32.9%
              width: 38.515625%
            tap_action:
              action: call-service
              service: script.clean_livingroom
            type: image
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              bedroom: /local/transparent.png
              charging: /local/ui/cleanUp/clean_kitchen.png
              goinghome: /local/ui/cleanUp/clean_kitchen.png
              kitchen: /local/ui/cleanUp/clean_kitchenSelected.png
              livingroom: /local/transparent.png
              study: /local/transparent.png
            style:
              left: 74.9%
              top: 24.7%
              width: 14.960937499999998%
            tap_action:
              action: call-service
              service: script.clean_kitchen
            type: image
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              bedroom: /local/transparent.png
              charging: /local/ui/cleanUp/clean_study.png
              goinghome: /local/ui/cleanUp/clean_study.png
              kitchen: /local/transparent.png
              livingroom: /local/transparent.png
              study: local/ui/cleanUp/clean_studySelected.png
            style:
              left: 72.45%
              top: 71%
              width: 12.812499999999998%
            tap_action:
              action: call-service
              service: script.clean_study
            type: image
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              bedroom: /local/ui/cleanUp/clean_bedroomSelected.png
              charging: /local/ui/cleanUp/clean_bedroom.png
              goinghome: /local/ui/cleanUp/clean_bedroom.png
              kitchen: /local/transparent.png
              livingroom: /local/transparent.png
              study: /local/transparent.png
            style:
              left: 86.1%
              top: 71%
              width: 13.515625%
            tap_action:
              action: call-service
              service: script.clean_bedroom
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/ui/cleanUp/robotControlsBG.png
            style:
              left: 38.5%
              top: 50%
              width: 19.296875%
            tap_action:
              action: none
            type: image
          - action: none
            entity: input_text.room_cleaning
            hold_action:
              action: none
            state_image:
              bedroom: /local/ui/cleanUp/cleaningStatusLive.png
              charging: /local/ui/cleanUp/cleaningStatusWait.png
              goinghome: /local/ui/cleanUp/cleaningStatusLive.png
              kitchen: /local/ui/cleanUp/cleaningStatusLive.png
              livingroom: /local/ui/cleanUp/cleaningStatusLive.png
              study: /local/ui/cleanUp/cleaningStatusLive.png
            style:
              left: 38.5%
              top: 46%
              width: 16.796875%
            type: image


            ########### Vacuum Robot Control Panel buttons ###########

            #   Note: uses input_text from configuration.yaml to show
            #   the right text, EG: "Cleaning Kitchen" status text

          - conditions:
              - entity: input_text.room_cleaning
                state_not: charging
            elements:
              - entity: sensor.vacuum_cleaning_status
                style:
                  color: 'rgba(255,255,255,1)'
                  font-size: 1.1vw
                  font-weight: 300
                  left: 38.4%
                  text-align: center
                  top: 51.2%
                  width: 15%
                type: state-label
            type: conditional
          - action: none
            hold_action:
              action: none
            image: /local/ui/cleanUp/btns/ring.png
            style:
              left: 34.3%
              top: 72.5%
              width: 8.203125%
            tap_action:
              action: call-service
              service: vacuum.locate
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/ui/cleanUp/btns/gohome.png
            style:
              left: 42.8%
              top: 72.5%
              width: 8.203125%
            tap_action:
              action: call-service
              service: vacuum.return_to_base
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/ui/cleanUp/btns/start.png
            style:
              left: 34.3%
              top: 86.5%
              width: 8.203125%
            tap_action:
              action: call-service
              service: vacuum.start
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/ui/cleanUp/btns/pause.png
            style:
              left: 42.8%
              top: 86.5%
              width: 8.203125%
            tap_action:
              action: call-service
              service: vacuum.pause
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
            type: image
          - action: none
            entity: sensor.vacuum_fan
            hold_action:
              action: none
            state_image:
              Silent: local/ui/cleanUp/btns/fan_1.png
              Standard: local/ui/cleanUp/btns/fan_1.png
              Medium: local/ui/cleanUp/btns/fan_1_selected.png
              Turbo: local/ui/cleanUp/btns/fan_1.png
            style:
              left: 32.22%
              top: 60.5%
              width: 4.1796875%
            tap_action:
              action: call-service
              service: vacuum.set_fan_speed
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
                fan_speed: Quiet
            type: image
          - action: none
            entity: sensor.vacuum_fan
            hold_action:
              action: none
            state_image:
              Silent: local/ui/cleanUp/btns/fan_2_selected.png
              Standard: local/ui/cleanUp/btns/fan_2.png
              Medium: local/ui/cleanUp/btns/fan_2.png
              Turbo: local/ui/cleanUp/btns/fan_2.png
            style:
              left: 36.48%
              top: 60.5%
              width: 4.1796875%
            tap_action:
              action: call-service
              service: vacuum.set_fan_speed
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
                fan_speed: Balanced
            type: image
          - action: none
            entity: sensor.vacuum_fan
            hold_action:
              action: none
            state_image:
              Silent: local/ui/cleanUp/btns/fan_3.png
              Standard: local/ui/cleanUp/btns/fan_3.png
              Medium: local/ui/cleanUp/btns/fan_3.png
              Turbo: local/ui/cleanUp/btns/fan_3_selected.png
            style:
              left: 40.74%
              top: 60.5%
              width: 4.1796875%
            tap_action:
              action: call-service
              service: vacuum.set_fan_speed
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
                fan_speed: Turbo
            type: image
          - action: none
            entity: sensor.vacuum_fan
            hold_action:
              action: none
            state_image:
              Silent: local/ui/cleanUp/btns/fan_4.png
              Standard: local/ui/cleanUp/btns/fan_4_selected.png
              Medium: local/ui/cleanUp/btns/fan_4.png
              Turbo: local/ui/cleanUp/btns/fan_4.png
            style:
              left: 45%
              top: 60.5%
              width: 4.1796875%
            tap_action:
              action: call-service
              service: vacuum.set_fan_speed
              service_data:
                entity_id: vacuum.xiaomi_vacuum_cleaner
                fan_speed: Max
            type: image
          - entity: sensor.vacuum_battery_icon
            style:
              '--iron-icon-height': 1.5vw
              '--iron-icon-width': 1.5vw
              left: 38.5%
              top: 20.5%
            type: state-icon
          - entity: sensor.vacuum_status
            style:
              color: 'rgba(255,255,255,0.6)'
              font-size: 1.1vw
              font-weight: 300
              left: 38.4%
              text-align: center
              top: 32.5%
              width: 15%
            type: state-label


            #################################################################
            #                                                               #
            #                      SIDEBAR : Cleanup                        #
            #                                                               #
            #################################################################


            #########################    Background    #########################

          - action: none
            hold_action:
              action: none
            image: /local/ui/sidebar/sidebarBG2.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
            tap_action:
              action: none
            type: image

            #########################    TIME & DATE    #########################

          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.7)'
              font-size: 5.41vw
              font-weight: 200
              left: 2.7%
              letter-spacing: '-0.05vw'
              max-width: 1px
              top: 10%
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.3)'
              font-size: 1.3vw
              font-weight: 300
              left: 18.1%
              letter-spacing: '-0.05vw'
              text-align: left
              top: 17%
              width: 30%
            tap_action:
              action: none
            type: state-label


            #########################   MENU BUTTONS   #########################

          - action: none
            image: /local/ui/sidebar/rooms_off.png
            style:
              border-radius: 5vw
              left: 11.7%
              top: 26%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/0
            type: image
          - action: none
            image: /local/ui/sidebar/cleanUp_on.png
            style:
              box-shadow: '0px 0.2vw 0.8vw 0px rgba(0,0,0,0.1)'
              left: 11.7%
              top: 34%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/1
            type: image
          - action: none
            image: /local/ui/sidebar/media_off.png
            style:
              left: 11.7%
              top: 42%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: image
          - action: none
            image: /local/ui/sidebar/health_off.png
            style:
              left: 11.7%
              top: 50%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: image

            #########################   PEOPLE   #########################

            #optional text label, currently invisible (make opacity:1) to show
          - style:
              color: white
              font-size: 1vw
              font-weight: 300
              left: 8.8%
              opacity: 0
              top: 66%
              width: 10%
            text: 'People at home:'
            type: 'custom:text-element'

          - action: none
            entity: person.luke_vink
            state_image:
              home: /local/people/luke.png
              not_home: /local/people/lukeGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 5.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            entity: person.santa_stibe
            state_image:
              home: /local/people/santa.png
              not_home: /local/people/santaGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 10.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 15.9%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 21.1%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image

            #########################    TEMPERATURE MINI GRAPH (INSIDE vs OUTSIDE)    #########################

          - color_thresholds:
              - color: '#4dd2ff'
                value: 10
              - color: '#ffa31a'
                value: 15
              - color: '#ff1a1a'
                value: 20
            entities:
              - sensor.stairs_detector_temperature
              - sensor.buienradar_ground_temperature
            icon: 'mdi:home-thermometer-outline'
            show:
              icon: true
              legend: false
              name: false
            style: |
              :host {
                left: 11.6%;
                top:  92.9%;
                width: 23.5%;
                overflow: hidden;
                height: 15%;
                background: none  !important;
                box-shadow: none !important;
              }
              .header {
                font-size: 1vw;
                position: absolute !important;
                width: 5% !important;
                padding: 0 !important;
                right: 20% !important;
                top: 15% !important;
              }
              ha-card {
                background: none  !important;
                padding: 0 !important;
              }
              .icon > ha-icon {
                width:1.8vw !important;
                height:1.8vw !important;
              }
              .state__time{
                font-size:0.9vw !important;
                margin-top: 0.2vw;
                font-weight: 300 !important;
                opacity: 0.4 !important;
              }
              .states {
                font-size: 0.5vw !important;
                padding: 1vw 0vw 0vw 0vw  !important;
                margin: auto !important;
                width: 68%;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: 'custom:mini-graph-card'

            #########################    WEATHER SIDEBAR CARD    #########################

          - backdrop: false
            entity: weather.buienweather
            name: ' '
            style: |
              :host {
                left: 11.4%;
                top:  85.5%;
                width: 17%;
                height: 7% !important;
                overflow: hidden;
                height: 8.5vw;
                background: none  !important;
                box-shadow: none !important;
                font-size: 1vw !important;
              }
              ha-card {
                background: none  !important;
                box-shadow: none !important;
                flex-flow: row-reverse !important;
                padding: 0 !important;
              }
              .weather__info--add{
                display : none !important;
              }
              .weather__info{
                flex-grow: 1;
                min-height: 0 !important;
                height: 2.4vw;
                margin-left: 0.6vw;
              }
              .weather__icon{
                margin-right:0.5% !important;
                margin-top: -3%;
                width: 2vw !important;
                height: 2vw !important;
                flex: 0 0 2vw !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/3
            type: 'custom:simple-weather-card'

            #########################    VISUAL SHADOW OVERLAYS    #########################

          - action: none
            image: /local/ui/sidebar/sideShadow.png
            style:
              height: 35%
              left: 18.45%
              pointer-events: none
              top: 83%
              width: 10%
            type: image
          - action: none
            image: /local/ui/sidebar/sidebarInnerShadow.png
            style:
              left: 22.83%
              opacity: 0.7
              pointer-events: none
              top: 50%
              width: 1.2109375%
            type: image

            #########################    NOW PLAYING SPOTIFY MENU BUTTON    #########################

          - entity: media_player.spotify_luke_vink
            hide:
              controls: true
              name: true
              power: true
              source: true
              volume: true
              progress: true
            idle_view:
              after: 0.1
              when_idle: true
              when_paused: true
              when_standby: true
            style: |
              :host {
                left: 11.7%;
                top: 41.5%;
                width: 20.5078125%;
                border-radius: 5vw;
                overflow: hidden;
                height: 3.8vw;
                box-shadow: none !important;
              }
              ha-card {
                border-radius: 5vw;
                overflow: hidden !important;
                box-shadow: none !important;
                padding: 0.1vw 0.9vw 0.7vw 1.05vw !important;
              }
              ha-card.--inactive .mmp-player{
                opacity: 0 !important;
              }

              #primaryProgress{
                background: #474A52 !important;
              }

              .entity__info{
                height: 2.6vw;
                width: 65% !important;
                max-height: 20vw !important;
                font-size: 0.9vw !important;
                margin:0 0 0 1.04vw !important;
                display: inline-block !important;
              }
              div.mmp__bg{
                background: #1E2022;
              }
              ha-card.--inactive div.mmp__bg{
                background: none;
              }
              div.mmp-player {
                padding: 0vw;
                height: 100%;
              }
              ha-card {
                height: 100%;
              }
              mmp-powerstrip {
                width: 100%;
                display: block;
                padding:0;
              }
              ha-icon{
                display: block !important;
                height: 2vw !important;
                width: 2vw !important;
                margin: 0.3vw 1.5vw 0 0vw !important;
              }
              .entity__icon{
                float:right;
                padding: 0.1vw;
                width: 3vw !important;
                height: 3vw !important;
                min-width: 0 !important;
                min-height: 0 !important;
                margin:0 !important;
                display: inline-block !important;
              }

              .mmp-player__core {
                height: auto;
                width: 100% !important;
                margin-bottom: 0.1vw;
                display: block !important;
                position: absolute !important;
                bottom: 0;
              }

              .entity__info__media{
                max-height: 20vw !important;
              }
              .entity__info__media span::before{
                content: none !important
              }
              .attr__media_title{
                display:block;
                color: white;
                font-weight: 300;
                font-size: 1.2vw !important;
              }
              .attr__media_artist{
                font-size: 0.8vw !important;
                font-weight: 200;
                color: white;
              }
              .entity__artwork{
                display:inline-block;
                float: right;
                margin-right: 0 !important;
                display: inline-block;
                float: right;
                width: 2.2vw !important;
                height: 2.2vw !important;
                min-width: 0 !important;
                margin: 0.2vw 1vw 0 0 !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: 'custom:mini-media-player'


    #############################################################################################################################################
    #                                                                                                                                           #
    #                                                            Now Playing Media View                                                         #
    #                                                                                                                                           #
    #############################################################################################################################################

  - title: Media
    icon: 'mdi:play-circle'
    panel: true
    badges: []
    cards:
      - elements:

            #########################    SPEAKER CONTROL BAR    #########################
            # controls an IR blaster to control my 'not connected' surround sound speakers

          - action: none
            entity: switch.speakers
            hold_action:
              action: none
            state_image:
              'off': /local/ui/btns/speakers_PowerOff.png
              'on': /local/ui/btns/speakers_PowerOn.png
            style:
              left: 31.7%
              top: 86.3%
              width: 12.578125%
            tap_action:
              action: toggle
            type: image
          - action: none
            hold_action:
              action: none
            image: /local/ui/btns/speakers_volumeBG.png
            style:
              left: 81.5%
              top: 86%
              width: 25.820312499999996%
            tap_action:
              action: none
            type: image
          - action: none
            entity: switch.speakers_up
            hold_action:
              action: none
            state_image:
              'off': /local/ui/btns/speakers_volumeUp.png
              'on': /local/ui/btns/speakers_volumeUp.png
            style:
              left: 87.8%
              top: 86%
              width: 15%
            tap_action:
              action: toggle
            type: image
          - action: none
            entity: switch.speakers_down
            hold_action:
              action: none
            state_image:
              'off': /local/ui/btns/speakers_volumeDown.png
              'on': /local/ui/btns/speakers_volumeDown.png
            style:
              left: 75.3%
              top: 86%
              width: 15%
            tap_action:
              action: toggle
            type: image
          - action: none
            entity: switch.projector_audio
            hold_action:
              action: none
            state_image:
              'off': /local/ui/btns/speakers_bluetooth.png
              'on': /local/ui/btns/speakers_projector.png
            style:
              left: 51.5%
              top: 86%
              width: 27.890625%
            tap_action:
              action: toggle
            type: image

            ###########################################################################
            #                                                                         #
            #                 IF PROJECTOR NOT ON, SHOW SPOTIFY:                      #
            #                                                                         #
            ###########################################################################

            #  Mini Media Player Card:
            #  https://github.com/kalkih/mini-media-player

          - conditions:
              - entity: device_tracker.projector
                state: not_home
            elements:
              - artwork: full-cover
                entity: media_player.spotify_luke_vink
                hide:
                  power: true
                  progress: false
                  runtime: false
                  volume: true
                style: |
                  :host {
                    left: 46% !important;
                    top: 39.8% !important;
                    width: 33% !important;
                    height: 62.3% !important;
                  }
                  ha-card{
                    border-radius: 1vw !important;
                    overflow: hidden !important;
                    height: 100%;
                  }
                  :host #primaryProgress{
                    background: #474A52 !important;
                  }
                type: 'custom:mini-media-player'
            type: conditional

            # Spotify Playlists Card:
            # https://github.com/custom-cards/spotify-card
          - type: conditional
            conditions:
            - entity: device_tracker.projector
              state: not_home
            elements:
                - type: 'custom:spotify-card'
                  limit: 10
                  always_play_random_song: true
                  name:
                  style: |
                    :host {
                        left: 79.5%;
                        top: 39.8%;
                        width: 31%;
                        height: 62.3%;
                        border-radius: 1vw;
                    }
                    #header{
                        display:none !important;
                    }
                    #content{
                        border:none !important;
                    }
                    .playback-controls{
                        display:none !important;
                    }
                    #header-track{
                        display:none;
                    }
                    .list-item > p{
                        white-space: nowrap;
                            overflow: hidden;
                    }
                    .list-item{
                        border-radius: 0.2vw;
                        overflow:hidden;
                        border:none !important;
                        margin-bottom:2px;
                    }




            ###########################################################################
            #                                                                         #
            #          IF PROJECTOR IS ON, SHOW PLEX & RECENTLY ADDED:                #
            #                                                                         #
            ###########################################################################

            # Mini Media Player Card:
            # https://github.com/kalkih/mini-media-player

            # Upcoming Media Card:
            # https://github.com/custom-cards/upcoming-media-card

            # Enabled by, Plex Recently Added Sensor:
            # https://github.com/custom-components/sensor.plex_recently_added

          - type: conditional
            conditions:
              - entity: device_tracker.projector
                state_not: not_home
              - entity: media_player.spotify_luke_vink
                state_not: playing
              - entity: media_player.plex_projector
                state_not: stopped
              - entity: media_player.plex_projector
                state_not: unavailable
              - entity: media_player.plex_projector
                state_not: idle
            elements:
              - entity: sensor.recently_added_tv
                style:
                  left: 84%
                  top: 25%
                  width: 18%
                title: Recently Added Tv
                type: 'custom:upcoming-media-card'
              - entity: sensor.recently_added_movies
                style:
                  left: 84%
                  top: 59.5%
                  width: 18%
                title: Recently Added Movies
                type: 'custom:upcoming-media-card'
              - artwork: cover
                entity: media_player.plex_projector
                hide:
                  icon: true
                  mute: false
                  power: true
                  power_state: true
                info: short
                style: |
                  :host {
                    border-radius: 1vw;
                    overflow: hidden;
                    height: 300px;
                    box-shadow: none !important;
                    left: 50% !important;
                    top: 43% !important;
                    width: 42.3% !important;
                    height: 66%
                  }
                  ha-card {
                    border-radius: 1vw;
                    height: 100%;
                    overflow: hidden !important;
                    box-shadow: none !important;
                  }
                type: 'custom:mini-media-player'
            style: |
                  ha-card {
                    background: rgba(42, 46, 48, 1)
                  }
                  upcoming-media-card ha-card{
                      background: none;
                      box-shadow: none !important;
                    }
                    upcoming-media-card ha-card div:nth-child(2) {
                      padding:0 !important;
                    }
                    .rece_poster{
                      width: 31% !important;
                      display: inline-block !important;
                      margin: 0% 0.2% !important;
                    }
                    .rece_svg_poster{
                      position: absolute !important;
                      bottom:-5%;
                      left:0;
                      width: 100% !important;
                    }
                    .rece_container_poster{
                      width:100% !important;
                      outline: none !important;
                      margin: 1% 1% !important;
                      overflow: hidden;
                    }

                    .rece_svg_poster > rect{
                     fill:none !important;
                    }
                    .card-header{
                      font-size: 1vw;
                      padding: 0;
                    }


          - type: conditional
            conditions:
              - entity: device_tracker.projector
                state_not: not_home
              - entity: media_player.spotify_luke_vink
                state_not: playing
              - entity: media_player.plex_projector
                state_not: playing
              - entity: media_player.plex_projector
                state_not: paused
            elements:

              - entity: sensor.recently_added_movies
                style:
                  left: 62.3%
                  top: 24%
                  width: 67%
                  height: 36.5%
                title: Recently Added Movies
                type: 'custom:upcoming-media-card'

              - entity: sensor.recently_added_tv
                style:
                  left: 62.3%
                  top: 60%
                  width: 67%
                  height: 36.5%
                title: Recently Added Tv
                type: 'custom:upcoming-media-card'

            card_mod:
              style: |
                    upcoming-media-card ha-card{
                      background: none;
                      box-shadow: none !important;
                    }
                    upcoming-media-card ha-card div:nth-child(2) {
                      padding:0 !important;
                    }
                    .rece_poster{
                        width: 17.6% !important;
                        display: inline-block !important;
                        margin: 0% 0.8% !important;
                        border-radius: 0.9vw;
                    }
                    .rece_svg_poster{
                      position: absolute !important;
                      bottom:-8%;
                      left:0;
                      width: 100% !important;
                      background: rgb(0,0,0);
                      background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
                    }
                    .rece_poster ha-icon{
                        transform: scale(0.5)
                    }
                    .rece_flag_poster svg{
                        filter:none;
                    }
                    .rece_container_poster{
                      width:100% !important;
                      outline: none !important;
                      margin: 1% 1% !important;
                      overflow: hidden;
                    }
                    .rece_svg_poster > rect{
                     fill:none !important;
                    }
                    .rece_line2_poster{
                        display:none;
                    }
                    # .rece_line1_poster{
                    #     font-size: 1.8vw;
                    # }
                    # .rece_line0_poster{
                    #     font-size: 2.2vw;
                    # }
                    .rece_flag_poster{
                        opacity: 0.5;
                    }
                    .card-header{
                      font-size: 1vw;
                      padding: 0 0.5vw;
                      height: 4vh;
                    }


            #################################################################
            #                                                               #
            #                             SIDEBAR                           #
            #                                                               #
            #################################################################

          - action: none
            hold_action:
              action: none
            image: /local/ui/sidebar/sidebarBG2.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
            tap_action:
              action: none
            type: image
          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.7)'
              font-size: 5.41vw
              font-weight: 200
              left: 2.7%
              letter-spacing: '-0.05vw'
              max-width: 1px
              top: 10%
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.3)'
              font-size: 1.3vw
              font-weight: 300
              left: 18.1%
              letter-spacing: '-0.05vw'
              text-align: left
              top: 17%
              width: 30%
            tap_action:
              action: none
            type: state-label
          - action: none
            image: /local/ui/sidebar/rooms_off.png
            style:
              border-radius: 5vw
              left: 11.7%
              top: 26%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/0
            type: image
          - action: none
            image: /local/ui/sidebar/cleanUp_off.png
            style:
              left: 11.7%
              top: 34%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/1
            type: image
          - action: none
            image: /local/ui/sidebar/media_on.png
            style:
              box-shadow: '0px 0.2vw 0.8vw 0px rgba(0,0,0,0.1)'
              left: 11.7%
              top: 42%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: image
          - action: none
            image: /local/ui/sidebar/health_off.png
            style:
              left: 11.7%
              top: 50%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: image

            #########################    PEOPLE    #########################

            # optional label for people (currently hidden, to show, change to opacity:1)
          - style:
              color: white
              font-size: 1vw
              font-weight: 300
              left: 8.8%
              opacity: 0
              top: 66%
              width: 10%
            text: 'People at home:'
            type: 'custom:text-element'


          - action: none
            entity: person.luke_vink
            state_image:
              home: /local/people/luke.png
              not_home: /local/people/lukeGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 5.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            entity: person.santa_stibe
            state_image:
              home: /local/people/santa.png
              not_home: /local/people/santaGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 10.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 15.9%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 21.1%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - color_thresholds:
              - color: '#4dd2ff'
                value: 10
              - color: '#ffa31a'
                value: 15
              - color: '#ff1a1a'
                value: 20
            entities:
              - sensor.stairs_detector_temperature
              - sensor.buienradar_ground_temperature
            icon: 'mdi:home-thermometer-outline'
            show:
              icon: true
              legend: false
              name: false
            style: |
              :host {
                left: 11.6%;
                top:  92.9%;
                width: 23.5%;
                overflow: hidden;
                height: 15%;
                background: none  !important;
                box-shadow: none !important;
              }
              .header {
                font-size: 1vw;
                position: absolute !important;
                width: 5% !important;
                padding: 0 !important;
                right: 20% !important;
                top: 15% !important;
              }
              ha-card {
                background: none  !important;
                padding: 0 !important;
              }
              .icon > ha-icon {
                width:1.8vw !important;
                height:1.8vw !important;
              }
              .state__time{
                font-size:0.9vw !important;
                margin-top: 0.2vw;
                font-weight: 300 !important;
                opacity: 0.4 !important;
              }
              .states {
                font-size: 0.5vw !important;
                padding: 1vw 0vw 0vw 0vw  !important;
                margin: auto !important;
                width: 68%;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: 'custom:mini-graph-card'
          - backdrop: false
            entity: weather.buienweather
            name: ' '
            style: |
              :host {
                left: 11.4%;
                top:  85.5%;
                width: 17%;
                height: 7% !important;
                overflow: hidden;
                height: 8.5vw;
                background: none  !important;
                box-shadow: none !important;
                font-size: 1vw !important;
              }
              ha-card {
                background: none  !important;
                box-shadow: none !important;
                flex-flow: row-reverse !important;
                padding: 0 !important;
              }
              .weather__info--add{
                display : none !important;
              }
              .weather__info{
                flex-grow: 1;
                min-height: 0 !important;
                height: 2.4vw;
                margin-left: 0.6vw;
              }
              .weather__icon{
                margin-right:0.5% !important;
                margin-top: -3%;
                width: 2vw !important;
                height: 2vw !important;
                flex: 0 0 2vw !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/3
            type: 'custom:simple-weather-card'
          - action: none
            image: /local/ui/sidebar/sideShadow.png
            style:
              height: 35%
              left: 18.45%
              pointer-events: none
              top: 83%
              width: 10%
            type: image
          - action: none
            image: /local/ui/sidebar/sidebarInnerShadow.png
            style:
              left: 22.83%
              opacity: 0.7
              pointer-events: none
              top: 50%
              width: 1.2109375%
            type: image
          - entity: media_player.spotify_luke_vink
            hide:
              controls: true
              name: true
              power: true
              source: true
              volume: true
              progress: true
            idle_view:
              after: 0.1
              when_idle: true
              when_paused: true
              when_standby: true
            show_progress: true
            style: |
              :host {
                left: 11.7%;
                top:  41.5%;
                width: 20.5078125%;
                border-radius: 5vw;
                overflow: hidden;
                height: 3.8vw;
                box-shadow: none !important;
              }
              ha-card {
                border-radius: 5vw;
                overflow: hidden !important;
                box-shadow: none !important;
                    padding: 0.1vw 0.9vw 0.7vw 1.05vw !important;
              }
              ha-card.--inactive .mmp-player{
                opacity: 0 !important;
              }
              #primaryProgress{
                background: #474A52 !important;
              }
              .entity__info{
                height: 2.6vw;
                width: 65% !important;
                max-height: 20vw !important;
                font-size: 0.9vw !important;
                margin:0 0 0 1.04vw !important;
                display: inline-block !important;
              }
              div.mmp__bg{
                background: #2B2E30;
              }
              ha-card.--inactive div.mmp__bg{
                background: none;
              }
              div.mmp-player {
                padding: 0vw;
                height: 100%;
              }
              ha-card {
                height: 100%;
              }
              mmp-powerstrip {
                width: 100%;
                display: block;
                padding:0;
              }
              ha-icon{
                display: block !important;
                height: 2vw !important;
                width: 2vw !important;
                margin: 0.3vw 1.5vw 0 0vw !important;
              }
              .entity__icon{
                float:right;
                padding: 0.1vw;
                width: 3vw !important;
                height: 3vw !important;
                min-width: 0 !important;
                min-height: 0 !important;
                margin:0 !important;
                display: inline-block !important;
              }

              .mmp-player__core {
                height: auto;
                width: 100% !important;
                margin-bottom: 0.1vw;
                display: block !important;
                position: absolute !important;
                bottom: 0;
              }

              .entity__info__media{
                max-height: 20vw !important;
              }
              .entity__info__media span::before{
                content: none !important
              }
              .attr__media_title{
                display:block;
                color: white;
                font-weight: 300;
                font-size: 1.2vw !important;
              }
              .attr__media_artist{
                font-size: 0.8vw !important;
                font-weight: 200;
                color: white;
              }
              .entity__artwork{
                display:inline-block;
                float: right;
                margin-right: 0 !important;
                display: inline-block;
                float: right;
                width: 2.2vw !important;
                height: 2.2vw !important;
                min-width: 0 !important;
                margin: 0.2vw 1vw 0 0 !important;
              }
            tap_action:
              action: null
            type: 'custom:mini-media-player'
        image: /local/ui/floorplan/blurredFloorplan.png
        type: picture-elements



    #############################################################################################################################################
    #                                                                                                                                           #
    #                                                               Weather View                                                                #
    #                                                                                                                                           #
    #############################################################################################################################################

  - title: Weather
    icon: 'mdi:white-balance-sunny'
    panel: true
    badges: []
    cards:
      - elements:
          - fillColor: 'rgba(89, 160, 238, 0.2)'
            lat: 53.361455
            lineColor: 'rgba(89, 160, 238, 1)'
            update_interval: 20
            long: 6.866892
            style: |
              :host {
                left: 60.5%;
                top:  80%;
                width: 68%;
                overflow: hidden;
                height: 28%;
                background: none !important;
                box-shadow: none !important;
              }
              ha-card {
                height: 100%;
                background: none  !important;
                box-shadow: none !important;
                border-radius: 1vw;
                position: relative;
                font-size: 1vw !important;
              }
              .chart-container {
                  height:100%;
                  width:100%
              }
              #container {
                  height:100%;
                  width:100%;
                  padding: 0 !important;
                  margin: 0 !important;
              }
            type: 'custom:buien-rain-forecast'
          - current: true
            details: true
            entity: weather.buienweather
            forecast: true
            name: Weather
            style: |
              :host {
                left: 61.5%;
                top:  38%;
                width: 70%;
                overflow: hidden;
                height: 63%;
                background: none !important;
                box-shadow: none !important;
              }
              .current {
                margin-bottom: 7vw;
              }
              .variations {
                margin-bottom: 4vw;
              }
              ha-card {
                height: 100%;
                background: none  !important;
                box-shadow: none !important;
                border-radius: 1vw;
                font-size: 1.2vw !important;
              }
              .forecast{
                padding: 0 2.5%;
                width: 95%;
              }
              .forecast .day:first-child{
                border-left: 0.1em solid #d9d9d9;
              }
              .forecast .day:last-child{
                border-right: 0.1em solid #d9d9d9;
              }
            type: 'custom:weather-card'
          - action: none
            hold_action:
              action: none
            image: /local/ui/sidebar/sidebarBG2.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
            tap_action:
              action: none
            type: image
          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.7)'
              font-size: 5.41vw
              font-weight: 200
              left: 2.7%
              letter-spacing: '-0.05vw'
              max-width: 1px
              top: 10%
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.3)'
              font-size: 1.3vw
              font-weight: 300
              left: 18.1%
              letter-spacing: '-0.05vw'
              text-align: left
              top: 17%
              width: 30%
            tap_action:
              action: none
            type: state-label
          - action: none
            image: /local/ui/sidebar/rooms_off.png
            style:
              border-radius: 5vw
              left: 11.7%
              top: 26%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/0
            type: image
          - action: none
            image: /local/ui/sidebar/cleanUp_off.png
            style:
              left: 11.7%
              top: 34%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/1
            type: image
          - action: none
            image: /local/ui/sidebar/media_off.png
            style:
              left: 11.7%
              top: 42%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: image
          - action: none
            image: /local/ui/sidebar/health_off.png
            style:
              left: 11.7%
              top: 50%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: image

            #########################    PEOPLE    #########################

            # optional label for people (currently hidden, to show, change to opacity:1)
          - style:
              color: white
              font-size: 1vw
              font-weight: 300
              left: 8.8%
              opacity: 0
              top: 66%
              width: 10%
            text: 'People at home:'
            type: 'custom:text-element'


          - action: none
            entity: person.luke_vink
            state_image:
              home: /local/people/luke.png
              not_home: /local/people/lukeGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 5.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            entity: person.santa_stibe
            state_image:
              home: /local/people/santa.png
              not_home: /local/people/santaGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 10.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 15.9%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 21.1%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - color_thresholds:
              - color: '#4dd2ff'
                value: 10
              - color: '#ffa31a'
                value: 15
              - color: '#ff1a1a'
                value: 20
            entities:
              - sensor.stairs_detector_temperature
              - sensor.buienradar_ground_temperature
            icon: 'mdi:home-thermometer-outline'
            show:
              icon: true
              legend: false
              name: false
            style: |
              :host {
                left: 11.6%;
                top:  92.9%;
                width: 23.5%;
                overflow: hidden;
                height: 15%;
                background: none  !important;
                box-shadow: none !important;
              }
              .header {
                font-size: 1vw;
                position: absolute !important;
                width: 5% !important;
                padding: 0 !important;
                right: 20% !important;
                top: 15% !important;
              }
              ha-card {
                background: none  !important;
                padding: 0 !important;
              }
              .icon > ha-icon {
                width:1.8vw !important;
                height:1.8vw !important;
              }
              .state__time{
                font-size:0.9vw !important;
                margin-top: 0.2vw;
                font-weight: 300 !important;
                opacity: 0.4 !important;
              }
              .states {
                font-size: 0.5vw !important;
                padding: 1vw 0vw 0vw 0vw  !important;
                margin: auto !important;
                width: 68%;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: 'custom:mini-graph-card'
          - backdrop: false
            entity: weather.buienweather
            name: ' '
            style: |
              :host {
                left: 11.4%;
                top:  85.5%;
                width: 17%;
                height: 7% !important;
                overflow: hidden;
                height: 8.5vw;
                background: none  !important;
                box-shadow: none !important;
                font-size: 1vw !important;
              }
              ha-card {
                background: none  !important;
                box-shadow: none !important;
                flex-flow: row-reverse !important;
                padding: 0 !important;
              }
              .weather__info--add{
                display : none !important;
              }
              .weather__info{
                flex-grow: 1;
                min-height: 0 !important;
                height: 2.4vw;
                margin-left: 0.6vw;
              }
              .weather__icon{
                margin-right:0.5% !important;
                margin-top: -3%;
                width: 2vw !important;
                height: 2vw !important;
                flex: 0 0 2vw !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/3
            type: 'custom:simple-weather-card'
          - action: none
            image: /local/ui/sidebar/sideShadow.png
            style:
              height: 35%
              left: 18.45%
              pointer-events: none
              top: 83%
              width: 10%
            type: image
          - action: none
            image: /local/ui/sidebar/sidebarInnerShadow.png
            style:
              left: 22.83%
              opacity: 0.7
              pointer-events: none
              top: 50%
              width: 1.2109375%
            type: image
          - entity: media_player.spotify_luke_vink
            hide:
              controls: true
              name: true
              power: true
              source: true
              volume: true
              progress: true
            idle_view:
              after: 0.1
              when_idle: true
              when_paused: true
              when_standby: true
            style: |
              :host {
                left: 11.7%;
                top: 41.5%;
                width: 20.5078125%;
                border-radius: 5vw;
                overflow: hidden;
                height: 3.8vw;
                box-shadow: none !important;
              }
              ha-card {
                border-radius: 5vw;
                overflow: hidden !important;
                box-shadow: none !important;
                padding: 0.1vw 0.9vw 0.7vw 1.05vw !important;
              }
              ha-card.--inactive .mmp-player{
                opacity: 0 !important;
              }
              #primaryProgress{
                background: #474A52 !important;
              }
              .entity__info{
                height: 2.6vw;
                width: 65% !important;
                max-height: 20vw !important;
                font-size: 0.9vw !important;
                margin:0 0 0 1.04vw !important;
                display: inline-block !important;
              }
              div.mmp__bg{
                background: #1E2022;
              }
              ha-card.--inactive div.mmp__bg{
                background: none;
              }
              div.mmp-player {
                padding: 0vw;
                height: 100%;
              }
              ha-card {
                height: 100%;
              }
              mmp-powerstrip {
                width: 100%;
                display: block;
                padding:0;
              }
              ha-icon{
                display: block !important;
                height: 2vw !important;
                width: 2vw !important;
                margin: 0.3vw 1.5vw 0 0vw !important;
              }
              .entity__icon{
                float:right;
                padding: 0.1vw;
                width: 3vw !important;
                height: 3vw !important;
                min-width: 0 !important;
                min-height: 0 !important;
                margin:0 !important;
                display: inline-block !important;
              }

              .mmp-player__core {
                height: auto;
                width: 100% !important;
                margin-bottom: 0.1vw;
                display: block !important;
                position: absolute !important;
                bottom: 0;
              }

              .entity__info__media{
                max-height: 20vw !important;
              }
              .entity__info__media span::before{
                content: none !important
              }
              .attr__media_title{
                display:block;
                color: white;
                font-weight: 300;
                font-size: 1.2vw !important;
              }
              .attr__media_artist{
                font-size: 0.8vw !important;
                font-weight: 200;
                color: white;
              }
              .entity__artwork{
                display:inline-block;
                float: right;
                margin-right: 0 !important;
                display: inline-block;
                float: right;
                width: 2.2vw !important;
                height: 2.2vw !important;
                min-width: 0 !important;
                margin: 0.2vw 1vw 0 0 !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: 'custom:mini-media-player'
        image: /local/ui/floorplan/blurredFloorplan.png
        style: |
          ha-card {
            background: rgba(42, 46, 48, 1)
          }
        type: picture-elements



    #############################################################################################################################################
    #                                                                                                                                           #
    #                                                               Health View                                                                 #
    #                                                                                                                                           #
    #############################################################################################################################################

  - title: Health
    icon: 'mdi:water-outline'
    panel: true
    badges: []
    cards:
      - elements:
          - type: 'custom:nightscout-card'
            url: 'https://lajv-ichor.herokuapp.com/'
            style:
             left: 61.8%
             top:  50%
             width: 67.5%
             height: 80%

        #   - color_thresholds:
        #       - color: '#FF004C'
        #         value: 3
        #       - color: '#03B4FF'
        #         value: 5
        #       - color: '#03B4FF'
        #         value: 8
        #       - color: '#B51BE4'
        #         value: 9
        #     line_width: 2
        #     points_per_hour: 6
        #     hours_to_show: 25
        #     height: 130
        #     update_interval: 30
        #     entities:
        #       - entity: sensor.luke_cgm_sgv_mmol
        #       - entity: binary_sensor.night
        #         color: rgba(255,255,255,.25)
        #         y_axis: secondary
        #         smoothing: false
        #         aggregate_func: min
        #         show_state: false
        #         show_line: false
        #         show_points: false
        #       - entity: input_number.range_high
        #         color: rgba(255,255,255,.1)
        #         smoothing: false
        #         line_width: 1
        #         aggregate_func: max
        #         show_state: false
        #         show_line: true
        #         show_points: false
        #       - entity: input_number.range_low
        #         color: rgba(255,255,255,.1)
        #         smoothing: false
        #         line_width: 1
        #         aggregate_func: max
        #         show_state: false
        #         show_line: true
        #         show_points: false
        #     state_map:
        #       - value: "off"
        #         label: "Day"
        #       - value: "on"
        #         label: "Night"
        #     icon: 'mdi:water-outline'
        #     align_state: right
        #     name_adaptive_color: true
        #     icon_adaptive_color: true
        #     show:
        #       icon: true
        #       legend: false
        #       name: false
        #       fill: false
        #       points: hover
        #     style: |
        #       :host {
        #         left: 61.8%;
        #         top:  32%;
        #         width: 67.5%;
        #         height: 43%;
        #         background: none  !important;
        #         box-shadow: none !important;
        #       }
        #       .state{
        #         flex-direction: column;
        #         margin-right: 4%;
        #       }
        #       .state__value{
        #         font-size:  3.5vw !important;
        #       }
        #       .header{
        #           height:0px !important;
        #           padding:0px !important;
        #       }
        #       .icon {
        #           position: absolute;
        #           top: -1%;
        #           left:  3%;
        #       }
        #       .icon > ha-icon {
        #         width:2.4vw !important;
        #         height:2.4vw !important;
        #       }
        #       .graph{
        #           flex-grow: 1;
        #       }
        #       .graph__container{
        #           flex-grow: 1;
        #       }

        #       mask:nth-child(3) .line, mask:nth-child(4) .line{
        #             stroke-width: 1;
        #             stroke-dasharray: 2 2;
        #       }
        #       ha-card {
        #         background: none  !important;
        #         padding: 0 !important;
        #         box-shadow: none !important;
        #       }
        #     type: 'custom:mini-graph-card'





          - action: none
            hold_action:
              action: none
            image: /local/ui/sidebar/sidebarBG2.png
            style:
              height: 100%
              left: 11.73828125%
              top: 50%
              width: 23.4765625%
            tap_action:
              action: none
            type: image
          - entity: sensor.time
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.7)'
              font-size: 5.41vw
              font-weight: 200
              left: 2.7%
              letter-spacing: '-0.05vw'
              max-width: 1px
              top: 10%
            tap_action:
              action: none
            type: state-label
          - entity: sensor.date_string
            hold_action:
              action: none
            style:
              color: 'rgba(255, 255, 255, 0.3)'
              font-size: 1.3vw
              font-weight: 300
              left: 18.1%
              letter-spacing: '-0.05vw'
              text-align: left
              top: 17%
              width: 30%
            tap_action:
              action: none
            type: state-label
          - action: none
            image: /local/ui/sidebar/rooms_off.png
            style:
              border-radius: 5vw
              left: 11.7%
              top: 26%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/0
            type: image
          - action: none
            image: /local/ui/sidebar/cleanUp_off.png
            style:
              left: 11.7%
              top: 34%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/1
            type: image
          - action: none
            image: /local/ui/sidebar/media_off.png
            style:
              left: 11.7%
              top: 42%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: image
          - action: none
            image: /local/ui/sidebar/health_on.png
            style:
              border-radius: 5vw
              box-shadow: '0px 0.2vw 0.8vw 0px rgba(0,0,0,0.1)'
              left: 11.7%
              top: 50%
              width: 20.5078125%
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: image

            #########################    PEOPLE    #########################

            # optional label for people (currently hidden, to show, change to opacity:1)
          - style:
              color: white
              font-size: 1vw
              font-weight: 300
              left: 8.8%
              opacity: 0
              top: 66%
              width: 10%
            text: 'People at home:'
            type: 'custom:text-element'


          - action: none
            entity: person.luke_vink
            state_image:
              home: /local/people/luke.png
              not_home: /local/people/lukeGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 5.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            entity: person.santa_stibe
            state_image:
              home: /local/people/santa.png
              not_home: /local/people/santaGone.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border-radius: 10vw
              height: 4.5vw
              left: 10.8%
              top: 72%
              width: 4.5vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 15.9%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - action: none
            image: /local/transparent.png
            style:
              background-color: 'rgba(255, 255, 255, 0.0)'
              border: '0.1vw dashed rgba(255, 255, 255, 0.3)'
              border-radius: 10vw
              height: 4.2vw
              left: 21.1%
              top: 72.2%
              width: 4.2vw
            tap_action: none
            type: image
          - color_thresholds:
              - color: '#4dd2ff'
                value: 10
              - color: '#ffa31a'
                value: 15
              - color: '#ff1a1a'
                value: 20
            entities:
              - sensor.stairs_detector_temperature
              - sensor.buienradar_ground_temperature
            icon: 'mdi:home-thermometer-outline'
            show:
              icon: true
              legend: false
              name: false
            style: |
              :host {
                left: 11.6%;
                top:  92.9%;
                width: 23.5%;
                overflow: hidden;
                height: 15%;
                background: none  !important;
                box-shadow: none !important;
              }
              .header {
                font-size: 1vw;
                position: absolute !important;
                width: 5% !important;
                padding: 0 !important;
                right: 20% !important;
                top: 15% !important;
              }
              ha-card {
                background: none  !important;
                padding: 0 !important;
              }
              .icon > ha-icon {
                width:1.8vw !important;
                height:1.8vw !important;
              }
              .state__time{
                font-size:0.9vw !important;
                margin-top: 0.2vw;
                font-weight: 300 !important;
                opacity: 0.4 !important;
              }
              .states {
                font-size: 0.5vw !important;
                padding: 1vw 0vw 0vw 0vw  !important;
                margin: auto !important;
                width: 68%;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/4
            type: 'custom:mini-graph-card'
          - backdrop: false
            entity: weather.buienweather
            name: ' '
            style: |
              :host {
                left: 11.4%;
                top:  85.5%;
                width: 17%;
                height: 7% !important;
                overflow: hidden;
                height: 8.5vw;
                background: none  !important;
                box-shadow: none !important;
                font-size: 1vw !important;
              }
              ha-card {
                background: none  !important;
                box-shadow: none !important;
                flex-flow: row-reverse !important;
                padding: 0 !important;
              }
              .weather__info--add{
                display : none !important;
              }
              .weather__info{
                flex-grow: 1;
                min-height: 0 !important;
                height: 2.4vw;
                margin-left: 0.6vw;
              }
              .weather__icon{
                margin-right:0.5% !important;
                margin-top: -3%;
                width: 2vw !important;
                height: 2vw !important;
                flex: 0 0 2vw !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/3
            type: 'custom:simple-weather-card'
          - action: none
            image: /local/ui/sidebar/sideShadow.png
            style:
              height: 35%
              left: 18.45%
              pointer-events: none
              top: 83%
              width: 10%
            type: image
          - action: none
            image: /local/ui/sidebar/sidebarInnerShadow.png
            style:
              left: 22.83%
              opacity: 0.7
              pointer-events: none
              top: 50%
              width: 1.2109375%
            type: image
          - entity: media_player.spotify_luke_vink
            hide:
              controls: true
              name: true
              power: true
              source: true
              volume: true
              progress: true
            idle_view:
              after: 0.1
              when_idle: true
              when_paused: true
              when_standby: true
            style: |
              :host {
                left: 11.7%;
                top: 41.5%;
                width: 20.5078125%;
                border-radius: 5vw;
                overflow: hidden;
                height: 3.8vw;
                box-shadow: none !important;
              }
              ha-card {
                border-radius: 5vw;
                overflow: hidden !important;
                box-shadow: none !important;
                padding: 0.1vw 0.9vw 0.7vw 1.05vw !important;
              }
              ha-card.--inactive .mmp-player{
                opacity: 0 !important;
              }
              #primaryProgress{
                background: #474A52 !important;
              }
              .entity__info{
                height: 2.6vw;
                width: 65% !important;
                max-height: 20vw !important;
                font-size: 0.9vw !important;
                margin:0 0 0 1.04vw !important;
                display: inline-block !important;
              }
              div.mmp__bg{
                background: #1E2022;
              }
              ha-card.--inactive div.mmp__bg{
                background: none;
              }
              div.mmp-player {
                padding: 0vw;
                height: 100%;
              }
              ha-card {
                height: 100%;
              }
              mmp-powerstrip {
                width: 100%;
                display: block;
                padding:0;
              }
              ha-icon{
                display: block !important;
                height: 2vw !important;
                width: 2vw !important;
                margin: 0.3vw 1.5vw 0 0vw !important;
              }
              .entity__icon{
                float:right;
                padding: 0.1vw;
                width: 3vw !important;
                height: 3vw !important;
                min-width: 0 !important;
                min-height: 0 !important;
                margin:0 !important;
                display: inline-block !important;
              }

              .mmp-player__core {
                height: auto;
                width: 100% !important;
                margin-bottom: 0.1vw;
                display: block !important;
                position: absolute !important;
                bottom: 0;
              }

              .entity__info__media{
                max-height: 20vw !important;
              }
              .entity__info__media span::before{
                content: none !important
              }
              .attr__media_title{
                display:block;
                color: white;
                font-weight: 300;
                font-size: 1.2vw !important;
              }
              .attr__media_artist{
                font-size: 0.8vw !important;
                font-weight: 200;
                color: white;
              }
              .entity__artwork{
                display:inline-block;
                float: right;
                margin-right: 0 !important;
                display: inline-block;
                float: right;
                width: 2.2vw !important;
                height: 2.2vw !important;
                min-width: 0 !important;
                margin: 0.2vw 1vw 0 0 !important;
              }
            tap_action:
              action: navigate
              navigation_path: /lovelace/2
            type: 'custom:mini-media-player'
        image: /local/ui/floorplan/blurredFloorplan.png
        style: |
          ha-card {
            background: rgba(42, 46, 48, 1)
          }
        type: picture-elements
